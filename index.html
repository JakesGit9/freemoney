<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Grampa's Life Support Simulator 2000!</title>
<style>
body {
  margin: 0;
  height: 100vh;
  overflow: hidden;
  background-color: #f0f0f0;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  font-family: Arial, sans-serif;
}

/* ads */
.ad {
  position: absolute;
  cursor: grab;
  z-index: 10; /* ads above kick button, below HUD */
  opacity: 0.95;
}
.ad img {
  max-width: 160px;
  max-height: 160px;
  user-select: none;
  pointer-events: none;
}

/* buttons */
#startButton, #addTimeButton {
  padding: 28px 40px;
  background-color: #007bff;
  color: white;
  border: none;
  font-size: 24px;
  cursor: pointer;
  border-radius: 10px;
  transition: background-color 0.3s, transform 0.12s;
}

#startButton:hover {
  background-color: #0056b3;
  transform: scale(1.05);
}

#addTimeButton {
  display: none;
  position: absolute;
  bottom: 40px;
  left: 50%;
  /* keep it centered via translateX; set transform-origin to center so scaling doesn't change the translate reference unexpectedly */
  transform: translateX(-50%);
  transform-origin: center center;
  z-index: 0; /* behind ads */
}
/* hover will scale while preserving the translate; transform-origin prevents odd shifts */
#addTimeButton:hover {
  background-color: #0056b3;
  transform: translateX(-50%) scale(1.05);
}

/* when disabled, don't apply the hover scale (prevents flicker/shift while disabled) */
#addTimeButton.disabled:hover {
  transform: translateX(-50%);
  background-color: #bbb;
  cursor: not-allowed;
}

#startButton { margin-top: 20px; z-index: 50; }
#titleScreen { font-size: 42px; font-weight: bold; margin-bottom: 10px; text-align: center; }
#newUpdateBanner { background-color: #ff4444; color: white; font-weight: bold; padding: 10px 20px; border-radius: 8px; margin-bottom: 15px; font-size: 20px; animation: pulse 1.2s infinite; z-index: 50; }
@keyframes pulse { 0% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.1); opacity: 0.8 } 100% { transform: scale(1); opacity: 1 } }

#instructions { font-size: 18px; margin-bottom: 20px; text-align: center; max-width: 500px; z-index: 50; }

/* HUD (always on top) */
#lifeSupportImage { width: 200px; height: auto; margin-bottom: 15px; position: relative; z-index: 100; }
#timerContainer {
  position: absolute;
  top: 60px;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  background-color: #ddd;
  border-radius: 10px;
  overflow: hidden;
  display: none;
  z-index: 100;
}
#timerBar { height: 25px; width: 100%; background-color: #28a745; transition: width 0.3s; }

#scoreCounter {
  position: absolute;
  top: 15px;
  left: 20px;
  font-size: 24px;
  font-weight: bold;
  z-index: 100;
}
#highScore {
  position: absolute;
  top: 50px;
  left: 20px;
  font-size: 20px;
  font-weight: bold;
  z-index: 100;
}

/* game over */
#gameOverScreen {
  display: none;
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.8); color: white; font-size: 40px; font-weight: bold;
  flex-direction: column; justify-content: center; align-items: center; z-index: 200; opacity: 0; transition: opacity 0.8s;
}
#gameOverScreen.show { display: flex; opacity: 1; }
#finalScore { font-size: 28px; margin-top: 15px; }

#restartButton { margin-top: 20px; padding: 15px 25px; font-size: 20px; background-color: #ff4444; border: none; border-radius: 8px; color: white; cursor: pointer; transition: background-color 0.3s; z-index: 200; }
#restartButton:hover { background-color: #cc0000; }

.disabled { background-color: #bbb; cursor: not-allowed; }
</style>
</head>
<body>

<div id="newUpdateBanner">ðŸš¨ NEW UPDATE ðŸš¨ - Version beta alpha sigma prefix bugpatch 1.69 2000</div>
<div id="titleScreen">Grampa's Life Support Simulator 2000 Edition!</div>
<div id="instructions">Attempt to kill grandpa by pressing the blue button before the timer runs out!<br>But beware of the annoying ads that try to block you...</div>

<img id="lifeSupportImage" src="image1.png" alt="Life Support Image">
<button id="startButton">Start Game</button>
<button id="addTimeButton">Kick His Life Support</button>

<div id="timerContainer"><div id="timerBar"></div></div>
<div id="scoreCounter">Score: 0</div>
<div id="highScore">High Score: 0</div>

<div id="gameOverScreen">
  <div id="gameOverText">Game Over!</div>
  <div id="finalScore">Final Score: 0</div>
  <button id="restartButton">Restart</button>
</div>

<script>
const adImages = ['ad1.jpg','ad2.jpg','ad3.jpg','ad4.jpg','ad5.jpg','ad6.jpg','ad7.jpg','ad8.jpg','ad9.jpg','ad10.jpg','ad11.jpg','ad12.jpg','ad13.jpg','ad14.jpg','ad15.jpg','ad16.jpg','ad17.jpg','ad18.jpg','ad19.jpg'];
const adLink = "https://lordmozart.github.io/scam/";

let adsSpawned = 0;
let adInterval = 800;
let timer = 10;
let score = 0;
let highScore = localStorage.getItem("highScore") || 0;
let gameInterval, spawnInterval, scoreInterval;
let canAddTime = true;
let gameRunning = false;
let mouseX = 0, mouseY = 0;

document.onmousemove = e => { mouseX = e.clientX; mouseY = e.clientY; };

const timerContainer = document.getElementById("timerContainer");
const timerBar = document.getElementById("timerBar");
const scoreCounter = document.getElementById("scoreCounter");
const highScoreDisplay = document.getElementById("highScore");
const startButton = document.getElementById("startButton");
const addTimeButton = document.getElementById("addTimeButton");
const titleScreen = document.getElementById("titleScreen");
const instructions = document.getElementById("instructions");
const lifeSupportImage = document.getElementById("lifeSupportImage");
const gameOverScreen = document.getElementById("gameOverScreen");
const restartButton = document.getElementById("restartButton");
const newUpdateBanner = document.getElementById("newUpdateBanner");
const finalScore = document.getElementById("finalScore");

highScoreDisplay.innerText = "High Score: " + highScore;

startButton.onclick = () => {
  startButton.style.display = "none";
  instructions.style.display = "none";
  titleScreen.style.display = "none";
  addTimeButton.style.display = "block";
  timerContainer.style.display = "block";
  newUpdateBanner.style.display = "none";
  scoreCounter.style.display = "block";
  highScoreDisplay.style.display = "block";
  timer = 10; score = 0;
  updateTimerBar(); updateScore();
  startTimer(); startScore();
  spawnInterval = setInterval(spawnAd, adInterval);
  gameRunning = true;
};

addTimeButton.onclick = () => {
  if (canAddTime) {
    timer = Math.min(timer + 2, 10);
    updateTimerBar();
    canAddTime = false;
    addTimeButton.classList.add("disabled");
    addTimeButton.disabled = true;
    const originalSrc = lifeSupportImage.src;
    lifeSupportImage.src = "image2.png";
    setTimeout(() => { lifeSupportImage.src = originalSrc; }, 750);
    setTimeout(() => {
      addTimeButton.classList.remove("disabled");
      addTimeButton.disabled = false;
      canAddTime = true;
    }, 750);
  }
};

function startTimer() {
  gameInterval = setInterval(() => {
    if (!document.hidden && gameRunning) {
      timer--; updateTimerBar();
      if (timer <= 0) endGame();
    }
  }, 1000);
}

function startScore() {
  scoreInterval = setInterval(() => {
    if (!document.hidden && gameRunning) {
      score++; updateScore();
    }
  }, 1000);
}

function updateTimerBar() {
  let cappedTime = Math.min(timer, 10);
  let percent = Math.max(0, (cappedTime / 10) * 100);
  timerBar.style.width = percent + "%";
  timerBar.style.backgroundColor =
    percent > 50 ? "#28a745" :
    percent > 20 ? "#ffc107" :
    "#dc3545";
}

function updateScore() { scoreCounter.innerText = "Score: " + score; }

/* spawn ads */
function spawnAd() {
  adsSpawned++;
  const adDiv = document.createElement("div");
  adDiv.classList.add("ad");
  const adImage = new Image();
  adImage.src = adImages[Math.floor(Math.random()*adImages.length)];
  adDiv.appendChild(adImage);
  document.body.appendChild(adDiv);
  makeDraggable(adDiv);

  const buttonRect = addTimeButton.getBoundingClientRect();
  let spawnX, spawnY;

  let spawnNearCursor = Math.random() < 0.1;
  let spawnNearButton = !spawnNearCursor && Math.random() < 0.5;

  if (spawnNearCursor) {
    spawnX = mouseX - 80 + (Math.random()*50-25);
    spawnY = mouseY - 80 + (Math.random()*50-25);
  } else if (spawnNearButton && buttonRect.width && buttonRect.height) {
    spawnX = buttonRect.left + (Math.random()*buttonRect.width-80);
    spawnY = buttonRect.top + (Math.random()*buttonRect.height-80);
  } else {
    spawnX = Math.random()*(window.innerWidth-160);
    spawnY = Math.random()*(window.innerHeight-160);
  }

  adDiv.style.top = spawnY+"px";
  adDiv.style.left = spawnX+"px";

  if (adsSpawned % 20 === 0) {
    adInterval = Math.max(adInterval-100,200);
    clearInterval(spawnInterval);
    spawnInterval = setInterval(spawnAd, adInterval);
  }
}

/* draggable with mouse + touch */
function makeDraggable(element) {
  let pos1=0, pos2=0, pos3=0, pos4=0;
  let isDragging = false;

  function getClientPos(e) {
    if (e.touches) {
      return { x: e.touches[0].clientX, y: e.touches[0].clientY };
    } else {
      return { x: e.clientX, y: e.clientY };
    }
  }

  function dragStart(e) {
    e.preventDefault();
    const pos = getClientPos(e);
    pos3 = pos.x;
    pos4 = pos.y;
    isDragging = false;

    document.onmouseup = closeDrag;
    document.onmousemove = dragElement;
    document.ontouchend = closeDrag;
    document.ontouchmove = dragElement;
  }

  function dragElement(e) {
    e.preventDefault();
    isDragging = true;
    const pos = getClientPos(e);
    pos1 = pos3 - pos.x;
    pos2 = pos4 - pos.y;
    pos3 = pos.x;
    pos4 = pos.y;

    element.style.top = (element.offsetTop - pos2) + "px";
    element.style.left = (element.offsetLeft - pos1) + "px";
  }

  function closeDrag(e) {
    document.onmouseup = null;
    document.onmousemove = null;
    document.ontouchend = null;
    document.ontouchmove = null;

    if (!isDragging) {
      window.open(adLink, "_blank");
    } else {
      if (
        element.offsetLeft < 20 ||
        element.offsetTop < 20 ||
        element.offsetLeft + element.offsetWidth > window.innerWidth - 20 ||
        element.offsetTop + element.offsetHeight > window.innerHeight - 20
      ) {
        element.remove();
      }
    }
  }

  element.onmousedown = dragStart;
  element.ontouchstart = dragStart;
  element.ondragstart = e => e.preventDefault();
}

function endGame() {
  clearInterval(gameInterval); clearInterval(spawnInterval); clearInterval(scoreInterval);
  gameRunning=false;
  finalScore.innerText = "Final Score: " + score;
  if (score > highScore) {
    highScore = score;
    localStorage.setItem("highScore", highScore);
  }
  highScoreDisplay.innerText = "High Score: " + highScore;
  gameOverScreen.classList.add("show");
}

restartButton.onclick = () => {
  document.querySelectorAll(".ad").forEach(ad=>ad.remove());
  adsSpawned=0; adInterval=800; timer=10; score=0;
  gameOverScreen.classList.remove("show");
  startButton.style.display="block";
  instructions.style.display="block";
  titleScreen.style.display="block";
  newUpdateBanner.style.display="block";
  addTimeButton.style.display="none";
  timerContainer.style.display="none";
  updateScore(); updateTimerBar();
};
</script>
</body>
</html>
